<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:composite="http://java.sun.com/jsf/composite" xmlns:b="http://bootsfaces.net/ui" xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/templates/layout.xhtml">
	<ui:define name="content">
		<f:event listener="#{data.preRender}" type="preRenderView" />
		<b:jumbotron style-class="#{style.name}">
			<b:messages global-only="true" id="msg" />
			<b:row>
				<b:column style-class="head-line" medium-screen="12">
					<h:outputText value="Detaills zu der Bewerbung:" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="12" style-class="green">
					<h:outputText value="#{data.model.stateLastEntry.jobState.name}" />
				</b:column>
			</b:row>

			<!-- Firma -->

			<b:row>
				<b:column col-md="12">
					<b:well style-class="head">Firmendaten</b:well>
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Firma:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.company.name}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Ort:" />
				</b:column>
				<b:column medium-screen="4">
					<h:outputText value="#{data.model.company.zip}" />
				</b:column>
				<b:column medium-screen="6">
					<h:outputText value="#{data.model.company.city}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Straße:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.company.street}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Web:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputLink value="#{data.model.company.web}" target="_blur" converter="linkConverter">
							#{data.model.company.web}
						</h:outputLink>
				</b:column>
			</b:row>

			<!-- Kontakt -->

			<b:row>
				<b:column>
					<b:well style-class="head">Kontakt</b:well>
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Name:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.company.contact.title.name}" />
					&nbsp;
					<h:outputText value="#{data.model.company.contact.firstName}" />
					&nbsp;
					<h:outputText value="#{data.model.company.contact.lastName}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Telefon:" />
				</b:column>
				<b:column medium-screen="3">
					<h:outputText value="#{data.model.company.contact.phone}" />
				</b:column>
				<b:column medium-screen="3">
					<h:outputLabel styleClass="label" value="Mobil:" />
				</b:column>
				<b:column medium-screen="3">
					<h:outputText value="#{data.model.company.contact.mobile}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="E-Mail:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.company.contact.email}" />
				</b:column>
			</b:row>

			<!-- Bewerbung -->

			<b:row>
				<b:column style-class="center">
					<b:well style-class="head">Bewerbung</b:well>
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Job:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.title}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Notiz/Ref:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.note}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Angebotsdatum:" />
				</b:column>
				<b:column medium-screen="2">
					<h:outputText value="#{data.model.jobAdDate}" converter="sqlDateConverter" />
				</b:column>
				<b:column offset="1" medium-screen="7">
					<h:outputLabel styleClass="label" value="Link:" />
					&nbsp;
					<h:outputLink value="#{data.model.webLink}" target="_blur" converter="linkConverter">Angebotsquelle</h:outputLink>
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Gehalt:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.salary}" />
				</b:column>
			</b:row>

			<!-- Verwaltung -->

			<b:row>
				<b:column style-class="center">
					<b:well style-class="head">Verwaltung</b:well>
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Status:" />
				</b:column>
				<b:column offset="1" medium-screen="2" style-class="green">
					<h:outputText value="#{data.model.stateLastEntry.timeStamp}" converter="dateConverter" />
				</b:column>
				<b:column medium-screen="7" style-class="green">
					<h:outputText value="#{data.model.stateLastEntry.jobState.name}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="In Vorlege-Liste:" />
				</b:column>
				<b:column offset="1" medium-screen="2" style-class="green">
					<h:outputText value="#{data.model.isListed}" converter="trueFalseConverter" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Fundort:" />
				</b:column>
				<b:column offset="1" medium-screen="9">
					<h:outputText value="#{data.model.source.pronomen}" />
					&nbsp;
					<h:outputText value="#{data.model.source.name}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Unterlagen Verz.:" />
				</b:column>
				<b:column offset="1" medium-screen="9">
					<h:outputText value="#{data.model.localDocDir}" />
				</b:column>
			</b:row>

			<!--  Dokumentenerstellung -->

			<b:row>
				<b:column style-class="center">
					<b:well style-class="head">Vorlagen für die Dokumentenerstellung</b:well>
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Anschreiben:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.letter.name}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Lebenslauf:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.vita.name}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="E-Mail:" />
				</b:column>
				<b:column medium-screen="10">
					<h:outputText value="#{data.model.email.name}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column style-class="center">
					<b:well style-class="head">Pfade der erstellen Dokumente</b:well>
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Anschreiben:" />
				</b:column>
				<b:column offset="1" medium-screen="9">
					<h:outputText value="#{data.model.letter.target}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="Lebenslauf:" />
				</b:column>
				<b:column offset="1" medium-screen="9">
					<h:outputText value="#{data.model.vita.target}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="E-Mail:" />
				</b:column>
				<b:column offset="1" medium-screen="9">
					<h:outputText value="#{data.model.email.target}" />
				</b:column>
			</b:row>
			<b:row>
				<b:column medium-screen="2">
					<h:outputLabel styleClass="label" value="PDF Anschreiben:" />
				</b:column>
				<b:column offset="1" medium-screen="9">
					<h:outputText value="#{data.model.pdf.target}" />
				</b:column>
			</b:row>

			<!-- Commands -->

			<hr />
			<b:row style-class="cmd">
				<b:form class="hidden-md hidden-sm hidden-xs">
					<b:row style-class="cmd">
						<b:column offset="2" medium-screen="1">
							<b:commandButton iconAwesome="fa-pencil" action="#{data.edit}" tooltip="Datensatz Bearbeiten" tooltip-delay-show="1000" />
						</b:column>
						<b:column medium-screen="1">
							<b:commandButton iconAwesome="fa-save" action="#{data.save}" disabled="#{!data.isNew}" tooltip="Datensatz speichern" tooltip-delay-show="1000" />
						</b:column>
						<b:column medium-screen="1">
							<b:commandButton iconAwesome="fa-eraser" action="#{data.delete}" tooltip="Datensatz Löeschen" tooltip-delay-show="1000" />
						</b:column>
						<b:column medium-screen="1">
							<b:commandButton iconAwesome="fa-history" action="#{data.history}" tooltip="Verlauf ansehen" tooltip-delay-show="1000" />
						</b:column>
						<b:column medium-screen="1">
							<b:commandButton iconAwesome="fa-paperclip" action="#{data.createDocs}" disabled="${!data.hasTaplates or data.docCreated}" tooltip="Dokumente erstellen, die als Text bzw. Anhänge dienen sollen" tooltip-delay-show="1000" />
						</b:column>
						<b:column medium-screen="1">
							<b:commandButton iconAwesome="fa-trash" action="#{data.deldocs}" disabled="#{!data.dirExist}" tooltip="Dokumente löschen" tooltip-delay-show="1000" />
						</b:column>
						<b:column medium-screen="1">
							<b:commandButton iconAwesome="fa-paper-plane" action="#{data.sendMail}" disabled="#{!data.readyToSend}" ajax="true" update="dlg-frm:id-dlg" oncomplete="$('.modal-dlg-pass').modal('#{data.modal}');" />
						</b:column>
						<b:column medium-screen="1">
							<b:commandButton iconAwesome="fa-file-pdf-o" action="#{data.applyTxt4Pdf}" disabled="#{data.docCreated}" tooltip="Text für die PDF Erstellung des Anschreiben eigeben" tooltip-delay-show="1000" />
						</b:column>
					</b:row>
				</b:form>
			</b:row>
		</b:jumbotron>

		<b:form id="dlg-frm">
			<ui:include src="../frgm/email_pass_fgm.xhtml" />
		</b:form>
	</ui:define>
</ui:composition>

</html>